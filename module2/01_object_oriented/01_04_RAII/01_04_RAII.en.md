---
What is RAII for? To prevent:
- Dangling pointers
- Resource leaks
- If a constructor acquires a resource, its class needs a destructor to release the resource; §5.2.2; [CG: C.20].
- Avoid “naked” new and delete operations; §5.2.2; [CG: R.11].
- Use resource handles and RAII to manage resources; §5.2.2; [CG: R.1].
---

# Resource leaks
Imagine you have the following code which dynamically allocates:

```cpp
void leakyFunction() {
    Car* car = new Car;

    // ...

    if (/* ... */) {
        return;
    }

    // ...

    delete car;
}
```

What is wrong with this code?

```
```

---

Imagine you have allocated memory using `new`, but an exception is thrown, or you take a code path that returns before you can call `delete`. This causes a memory leak, which can lead to your program consuming more and more memory over time.

# Destructors
A destructor is a special member function of a class that is executed whenever an object of that class goes out of scope or is explicitly deleted. Destructors help in cleaning up resources that were acquired during the object's lifetime.

## Destructor Syntax
The destructor has the same name as the class, but is prefixed with a tilde `~`. It takes no arguments and returns no value.

```cpp
class Resource {
public:
    ~Resource() {
        // ...
    }
};
```

In the following example, the `Resource` class acquires memory during construction and releases it in the destructor:

```cpp
#include <iostream>
#include <memory>

class Resource {
public:
    Resource(size_t size) {
        std::cout << "Resource acquired\n";
        data = new int[size];
    }

    ~Resource() {
        std::cout << "Resource released\n";
        delete[] data;
    }

private:
    int* data;
};

int main() {
    Resource resource;
}
```

# Resource Acquisition Is Initialization (RAII)

RAII is a programming idiom used in C++ to manage the lifetime of resources like memory, file handles, sockets, and more. It helps to prevent resource leaks and simplifies error handling.